<div class="squadron-toolbar">
  <div *ngFor="let squadron of getSquadronTabs()" 
    (click)="goToSquadron(squadron.index)"
    [class]="squadron.active ? 'active' : ''">
    <xwing-icon [name]="squadron.faction"></xwing-icon>{{ squadron.name }} ({{squadron.pointsDestroyed}}/{{squadron.pointTotal}})
    <i *ngIf="squadron.active" class="fa fa-times" (click)="closeSquadron(squadron.index)"></i>
  </div>
</div>
<ion-content padding>
  <div *ngIf="!squadron" [class]="'card-container' + layout.getClass()">
    <ion-card>
      <img src="assets/img/splash.png">
      <ion-card-header>
        <ion-card-title>
          X-Wing Tabled
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div *ngIf="dataService.initialized">
          To begin, add a squadron.
        </div>
        <div *ngIf="!dataService.initialized">
          <div class="progress-bar-container">
            <progress-bar 
              [progress]="data_progress" 
              [color]="'#488aff'">
            </progress-bar>
          </div>
          {{ data_message }}
          <div class="ion-text-right">
            <ion-button *ngIf="retry_button" [disabled]="retry_button_disabled" (click)="retryManifest()">Retry Download</ion-button>
            <ion-button *ngIf="data_button" [disabled]="data_button_disabled" (click)="downloadData()">Download Data</ion-button>
            <ion-button *ngIf="image_button" [disabled]="image_button_disabled" (click)="downloadArtwork()">Download Artwork</ion-button> 
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
  <squadron *ngIf="squadron" [squadron]="squadron" [squadronNum]="squadronNum"></squadron>
  <ion-fab *ngIf="dataService.initialized" vertical="bottom" horizontal="end" slot="fixed" class="labels2">
    <ion-fab-button>
      <ion-icon name="more"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top" class="labels">
      <ion-fab-button (click)="resetData()" data-desc="Nuke local data">
        <ion-icon name="nuclear"></ion-icon>
      </ion-fab-button>
      <ion-fab-button *ngIf="state.squadron" (click)="askReset()" data-desc="Reset squadron">
        <xwing-icon [name]="'reload'"></xwing-icon>
      </ion-fab-button>
      <ion-fab-button *ngIf="state.snapshots.length > 1" (click)="askUndo()" data-desc="Undo">
        <ion-icon name="undo"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="xwsAddButton()" data-desc="Import squadron">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>
